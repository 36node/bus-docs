# ADR 7: 领域逻辑集中到Model层，与基础设施逻辑隔离

Date: 2019-12-19

## 状态

生效中

## 背景

为了提高系统质量，减少系统缺陷出现，需要提高代码的可修改性、可测试性。

## 决定

将领域逻辑集中到Model层。

其他地方，如controller，consumer，producer等，只负责数据的分发和简单格式转换，不写入领域逻辑。

## 后果

基础设施层代码（controller，consumer，producer）完成线上测试后，便不受业务变动影响，不需要再因业务变动而修改，不会因此而引入缺陷。

Model层代码隔离了框架和基础设施（koa，kafka）的影响，容易进行单元测试，容易达到较高的测试覆盖，保障重点业务场景在系统修改过程中的质量。

隔离后有助于确保领域逻辑代码和基础设施代码的质量，提升系统的整体质量。
