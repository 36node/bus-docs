# ADR 9: 单元测试使用真实数据库替代内存式数据库

Date: 2020-03-26

## 状态

生效中

## 背景

在微服务架构下，单个服务测试数量不太可能出现单体架构下的上千个测试用例。
使用内存式测试数据库带来的便利不多，但却引入了较多的不便。

## 决定

测试model层也使用真实数据库。

## 后果

开发时不需要对内存式测试数据库的依赖，加快了开发环境初始化时间。
如果将来配好了数据库migration机制，所有测试也容易支持。

## 其他

API测试和model层测试除了测试抽象层级不同，技术上已经没有区别，可以统一对待。
